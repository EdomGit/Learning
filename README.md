# Игра с шариками

Интерактивная игра с анимированными шариками, где вы можете всасывать, перемещать и смешивать цвета шариков.

## Описание игры

Игра представляет собой физический симулятор шариков с интерактивным управлением:

- **Анимированные шарики** - шарики движутся по экрану с физикой (трение, отскоки от границ)
- **Смешивание цветов** - при касании шарики смешивают свои цвета, создавая новые оттенки
- **Всасывание шариков** - зажмите левую кнопку мыши и двигайте курсором, чтобы всасывать шарики в инвентарь
- **Выброс шариков** - правой кнопкой мыши вы можете выбросить шарик из инвентаря обратно на поле
- **Зона удаления** - шарики, попавшие в правый верхний угол, автоматически удаляются
- **Добавление шариков** - нажмите пробел, чтобы добавить новый шарик в позиции курсора

## Управление

- **Левая кнопка мыши (зажать и двигать)** - всасывание шариков в инвентарь
- **Правая кнопка мыши** - выброс шарика из инвентаря в позицию курсора
- **Пробел** - добавить новый шарик в позиции курсора
- **Закрытие окна** - выход из игры

## Запуск локально

### Требования

- Python 3.7 или выше
- Tkinter (обычно встроен в Python, но на некоторых системах может потребоваться установка)

### Установка зависимостей

Tkinter встроен в Python, поэтому дополнительные зависимости не требуются. Однако на некоторых Linux-системах может потребоваться установить пакет `python3-tk`:

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install python3-tk
```

**Fedora/RHEL:**
```bash
sudo dnf install python3-tkinter
```

**macOS:**
Tkinter обычно уже установлен с Python.

**Windows:**
Tkinter встроен в стандартную установку Python.

### Запуск игры

Запустите игру одной командой:

```bash
python gui.py
```

Или:

```bash
python3 gui.py
```

## Запуск в Docker-контейнере

Для запуска игры в Docker-контейнере с графическим интерфейсом используется X11 forwarding.

### Требования для Docker

- Docker установлен и запущен
- X11 сервер работает на хосте (для Linux обычно уже запущен, для Windows/macOS нужен X11 сервер)

### Настройка X11 (только для Linux)

Если вы используете Linux, разрешите доступ к X11 серверу:

```bash
xhost +local:docker
```

**Важно:** После использования отключите доступ для безопасности:
```bash
xhost -local:docker
```

### Сборка Docker-образа

```bash
docker build -t balls-game .
```

### Запуск Docker-контейнера

**Для Linux:**
```bash
docker run -it --rm \
  -e DISPLAY=$DISPLAY \
  -v /tmp/.X11-unix:/tmp/.X11-unix \
  --name balls-game \
  balls-game
```

**Для Windows (с X11 сервером VcXsrv):**

1. **Установите и настройте VcXsrv:**
   - Скачайте VcXsrv с [официального сайта](https://sourceforge.net/projects/vcxsrv/)
   - Установите и запустите XLaunch
   - Выберите "Multiple windows" или "One large window"
   - На экране "Client startup" отметьте "Disable access control" (важно!)
   - Завершите настройку

2. **Узнайте IP адрес хоста Windows:**
   ```powershell
   # В PowerShell выполните:
   ipconfig
   # Найдите IPv4 адрес (например, 192.168.1.100)
   ```

3. **Запустите контейнер:**
   ```bash
   # Замените YOUR_IP_ADDRESS на ваш IP адрес из шага 2
   docker run -it --rm \
     -e DISPLAY=YOUR_IP_ADDRESS:0.0 \
     --name balls-game \
     balls-game
   ```

   **Или используйте host.docker.internal (для Docker Desktop):**
   ```bash
   docker run -it --rm \
     -e DISPLAY=host.docker.internal:0.0 \
     --name balls-game \
     balls-game
   ```

   **Если не работает, попробуйте с IP адресом 127.0.0.1:**
   ```bash
   docker run -it --rm \
     -e DISPLAY=127.0.0.1:0.0 \
     --name balls-game \
     balls-game
   ```

**Для macOS (с XQuartz):**
```bash
# Сначала в терминале XQuartz:
xhost + 127.0.0.1

# Затем запустите контейнер:
docker run -it --rm \
  -e DISPLAY=host.docker.internal:0 \
  --name balls-game \
  balls-game
```

### Альтернативный способ запуска (с явным указанием DISPLAY)

Если автоматическое определение не работает, укажите DISPLAY явно:

```bash
# Узнайте значение DISPLAY на хосте
echo $DISPLAY

# Затем запустите контейнер с этим значением
docker run -it --rm \
  -e DISPLAY=:0 \
  -v /tmp/.X11-unix:/tmp/.X11-unix \
  --name balls-game \
  balls-game
```

## Структура проекта

```
.
├── gui.py           # Графический интерфейс игры (точка входа)
├── logic.py         # Игровая логика (движение, столкновения, всасывание)
├── Dockerfile       # Конфигурация Docker-контейнера
├── requirements.txt # Зависимости проекта (tkinter встроен в Python)
└── README.md        # Документация
```

## Технические детали

- **Язык:** Python 3
- **GUI библиотека:** Tkinter (встроена в Python)
- **Архитектура:** Разделение логики (logic.py) и интерфейса (gui.py)
- **Физика:** Простая физическая модель с трением и отскоками
- **Анимация:** Обновление экрана 60 FPS

## Настройка

Вы можете изменить параметры игры в файле `gui.py`:

- `SCREEN_WIDTH` и `SCREEN_HEIGHT` - размер окна игры
- `FPS` - частота обновления кадров
- `STARTING_BALLS` - количество шариков при старте игры

## Устранение проблем

### Ошибка "No module named '_tkinter'"

Установите пакет tkinter для вашей системы (см. раздел "Установка зависимостей").

### Графическое окно не открывается в Docker

**Для Windows:**
1. Убедитесь, что VcXsrv запущен и работает
2. Проверьте, что в настройках VcXsrv отмечено "Disable access control"
3. Попробуйте использовать IP адрес вместо `host.docker.internal`:
   ```powershell
   # Узнайте IP адрес
   ipconfig
   # Затем запустите:
   docker run -it --rm -e DISPLAY=ВАШ_IP:0.0 --name balls-game balls-game
   ```
4. Если используете WSL2, попробуйте:
   ```bash
   export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2}'):0.0
   docker run -it --rm -e DISPLAY=$DISPLAY --name balls-game balls-game
   ```
5. Проверьте, что брандмауэр Windows не блокирует соединение

**Для Linux:**
1. Убедитесь, что X11 сервер запущен
2. Проверьте, что переменная DISPLAY установлена корректно
3. Выполните `xhost +local:docker` перед запуском контейнера
4. Проверьте, что монтируется `/tmp/.X11-unix`

**Для macOS:**
1. Убедитесь, что XQuartz запущен
2. Выполните `xhost + 127.0.0.1` в терминале
3. Используйте `DISPLAY=host.docker.internal:0`

### Игра работает медленно

Уменьшите значение `STARTING_BALLS` или `FPS` в файле `gui.py`.

## Лицензия

Этот проект создан в образовательных целях.

